export default function t(e){var o=e.selector,i=void 0===o?null:o,n=e.className,s=e.onCreate,a=e.onLoaded,r=e.onDestroy,l=e.overlayElem,c=void 0===l?"":l,d=e.overlayContainer,h=void 0===d?"":d,v=e.overlayContent,u=void 0===v?"":v,y=e.backdrop,p=void 0===y?"":y,m=e.content,f=void 0===m?null:m,b=e.isVideo,C=void 0!==b&&b,E=e.type,k=void 0===E?"":E,L=e.videoId,w=void 0===L?null:L,O=e.element,T=void 0===O?null:O,g=e.autoplay,_=void 0===g?null:g,j=e.disableTracking,A=void 0===j?null:j;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.className=n,this.selector=i,this.overlayElem=c,this.overlayContainer=h,this.overlayContent=u,this.backdrop=p,this.content=f,this.onCreate=s,this.onLoaded=a,this.onDestroy=r,this.isVideo=C,this.type=k,this.videoId=w,this.element=T,this.content=f,this.autoplay=_,this.disableTracking=A,this.create=function(){if("function"==typeof this.onCreate&&this.onCreate(),this.destroy(),Object.prototype.hasOwnProperty.call(this,"selector")&&null!==this.selector){var t=document.querySelector(this.selector);t?(this.content=t.innerHTML,this.constructOverlay()):console.warn("novicell.overlay: element does not exist. Please provide a valid selector for use in document.querySelector.")}else if(Object.prototype.hasOwnProperty.call(this,"element")&&null!==this.element)this.element?(this.content=this.element.innerHTML,this.constructOverlay()):console.warn("novicell.overlay: element does not exist. Please provide a valid DOM element.");else if(this.videoId){var e="";if(this.isVideo=!0,"vimeo"===this.type)e="https://player.vimeo.com/video/".concat(this.videoId,"?autoplay=").concat(this.autoplay,"&loop=1&muted=1&dnt=").concat(this.disableTracking);else{if("youtube"!==this.type)return;e=this.disableTracking?"https://www.youtube-nocookie.com/":"https://www.youtube.com/",e+="embed/".concat(this.videoId,"?autoplay=").concat(this.autoplay,"&rel=0")}var o=document.createElement("iframe");o.setAttribute("src",e),o.setAttribute("frameborder",0),o.setAttribute("allow","autoplay"),o.setAttribute("allowfullscreen",""),o.setAttribute("width","100%"),o.setAttribute("height","100%"),this.content=o.outerHTML,this.constructOverlay()}},this.destroy=function(){var t=this;document.querySelector("#js-novi-overlay")&&(this.overlayElem.parentElement.removeChild(this.overlayElem),this.backdrop.parentElement.removeChild(this.backdrop),document.removeEventListener("keyup",function(){t.destroy()}),document.documentElement.classList.remove("no-scroll","novi-overlay--open"),this.isVideo=!1,"function"==typeof this.onDestroy&&this.onDestroy())},this.constructOverlay=function(){this.setupBackdrop(),this.setupOverlay(),this.setupOverlayContainer(),this.setupCloseButton(),document.documentElement.classList.add("no-scroll"),"function"==typeof this.onLoaded&&this.onLoaded()},this.setupBackdrop=function(){var t=this;this.backdrop=document.createElement("div"),this.backdrop.classList.add("novi-backdrop"),this.backdrop.id="js-novi-backdrop",this.backdrop.addEventListener("click",function(e){(e.target.classList.contains("novi-overlay")||e.target.classList.contains("novi-overlay__container"))&&t.destroy()}),document.querySelector("body").appendChild(this.backdrop)},this.setupOverlay=function(){this.overlayElem=document.createElement("div"),this.overlayElem.classList.add("novi-overlay"),this.overlayElem.id="js-novi-overlay",Object.prototype.hasOwnProperty.call(this,"className")&&this.overlayElem.classList.add(this.className),this.backdrop.appendChild(this.overlayElem)},this.setupOverlayContainer=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.classList.add("novi-overlay__container"),this.overlayContent=document.createElement("div"),this.overlayContent.classList.add("novi-overlay__content"),this.isVideo&&this.overlayContent.classList.add("novi-overlay__content--video"),this.overlayContent.innerHTML=this.content,this.overlayContainer.appendChild(this.overlayContent),this.overlayElem.appendChild(this.overlayContainer)},this.setupCloseButton=function(){var t=this,e=document.createElement("button");e.classList.add("novi-overlay-close","button--close"),e.type="button",e.id="js-novi-overlay-close",e.addEventListener("click",function(){t.destroy()}),document.addEventListener("keydown",function(e){27===e.keyCode&&t.destroy()}),this.overlayContent.appendChild(e)},this.get=function(t){return new Promise(function(e,o){var i=new XMLHttpRequest;i.open("GET",t),i.onload=function(){i.status>=200&&i.status<400?e(i.response):o(Error(i.statusText))},i.onerror=function(){o(Error("Network Error"))},i.send()})}}
