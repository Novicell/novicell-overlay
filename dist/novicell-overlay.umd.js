!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self)["novicell-overlay"]=e["novicell-overlay"]||{},e["novicell-overlay"].js=t())}(this,function(){"use strict";return function e(t){var o=t.selector,n=void 0===o?null:o,i=t.className,s=t.onCreate,l=t.onLoaded,a=t.onDestroy,r=t.overlayElem,c=void 0===r?"":r,d=t.overlayContainer,v=void 0===d?"":d,h=t.overlayContent,u=void 0===h?"":h,y=t.backdrop,p=void 0===y?"":y,m=t.content,f=void 0===m?null:m,C=t.isVideo,E=void 0!==C&&C,b=t.videoType,w=void 0===b?"":b,L=t.videoId,k=void 0===L?null:L,T=t.element,_=void 0===T?null:T,O=t.autoplay,x=void 0===O?null:O,g=t.pathCloseIcon,j=void 0===g?null:g,I=t.closeButtonText,B=void 0===I?null:I;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.className=i,this.selector=n,this.overlayElem=c,this.overlayContainer=v,this.overlayContent=u,this.backdrop=p,this.content=f,this.onCreate=s,this.onLoaded=l,this.onDestroy=a,this.isVideo=E,this.videoType=w,this.videoId=k,this.element=_,this.content=f,this.autoplay=x,this.pathCloseIcon=j,this.closeButtonText=B,this.create=function(){if("function"==typeof this.onCreate&&this.onCreate(),this.destroy(),Object.prototype.hasOwnProperty.call(this,"selector")&&null!==this.selector){var e=document.querySelector(this.selector);e?(this.content=e.innerHTML,this.constructOverlay()):console.warn("novicell.overlay: element does not exist. Please provide a valid selector for use in document.querySelector.")}else if(Object.prototype.hasOwnProperty.call(this,"element")&&null!==this.element)this.element?(this.content=this.element.innerHTML,this.constructOverlay()):console.warn("novicell.overlay: element does not exist. Please provide a valid DOM element.");else if(this.videoId){var t="";if(this.isVideo=!0,"vimeo"===this.videoType)t="https://player.vimeo.com/video/".concat(this.videoId,"?autoplay=").concat(this.autoplay,"&loop=1&muted=1");else{if("youtube"!==this.videoType)return;t="https://www.youtube.com/embed/".concat(this.videoId,"?autoplay=").concat(this.autoplay,"&rel=0")}var o=document.createElement("iframe");o.setAttribute("src",t),o.setAttribute("frameborder",0),o.setAttribute("allow","autoplay; fullscreen"),o.setAttribute("allowfullscreen",""),o.setAttribute("width","100%"),o.setAttribute("height","100%"),this.content=o.outerHTML,this.constructOverlay()}},this.destroy=function(){var e=this;document.querySelector("#js-novi-overlay")&&(this.overlayElem.parentElement.removeChild(this.overlayElem),this.backdrop.parentElement.removeChild(this.backdrop),document.removeEventListener("keyup",function(){e.destroy()}),document.documentElement.classList.remove("no-scroll","novi-overlay--open"),this.isVideo=!1,"function"==typeof this.onDestroy&&this.onDestroy())},this.constructOverlay=function(){this.setupBackdrop(),this.setupOverlay(),this.setupOverlayContainer(),this.setupCloseButton(),document.documentElement.classList.add("no-scroll"),"function"==typeof this.onLoaded&&this.onLoaded()},this.setupBackdrop=function(){var e=this;this.backdrop=document.createElement("div"),this.backdrop.classList.add("novi-backdrop"),this.backdrop.id="js-novi-backdrop",this.backdrop.addEventListener("click",function(t){(t.target.classList.contains("novi-overlay")||t.target.classList.contains("novi-overlay__container"))&&e.destroy()}),document.querySelector("body").appendChild(this.backdrop)},this.setupOverlay=function(){this.overlayElem=document.createElement("div"),this.overlayElem.classList.add("novi-overlay"),this.overlayElem.id="js-novi-overlay",Object.prototype.hasOwnProperty.call(this,"className")&&this.overlayElem.classList.add(this.className),this.backdrop.appendChild(this.overlayElem)},this.setupOverlayContainer=function(){this.overlayContainer=document.createElement("div"),this.overlayContainer.classList.add("novi-overlay__container"),this.overlayContent=document.createElement("div"),this.overlayContent.classList.add("novi-overlay__content"),this.isVideo&&this.overlayContent.classList.add("novi-overlay__content--video"),this.overlayContent.innerHTML=this.content,this.overlayContainer.appendChild(this.overlayContent),this.overlayElem.appendChild(this.overlayContainer)},this.setupCloseButton=function(){var e=this,t=document.createElement("button");if(t.classList.add("novi-overlay-close","button--close"),t.type="button",t.id="js-novi-overlay-close",this.pathCloseIcon){var o=document.createElement("span");o.classList.add("novi-overlay-close__icon");var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("svg-icon","novi-overlay-close__svg");var i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.pathCloseIcon),n.appendChild(i),o.appendChild(n),t.classList.add("novi-overlay-close--custom-icon"),t.appendChild(o)}else{var s=document.createElement("span");s.classList.add("novi-overlay-close__default-icon"),t.appendChild(s)}if(this.closeButtonText){var l=document.createElement("span");l.classList.add("novi-overlay-close__text"),l.innerText=this.closeButtonText,t.appendChild(l)}t.addEventListener("click",function(){e.destroy()}),document.addEventListener("keydown",function(t){27===t.keyCode&&e.destroy()}),this.overlayContent.appendChild(t)},this.get=function(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){n.status>=200&&n.status<400?t(n.response):o(Error(n.statusText))},n.onerror=function(){o(Error("Network Error"))},n.send()})}}});
